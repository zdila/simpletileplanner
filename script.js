const rows=[];for(let b=0;20>b;b++){const c=[];for(let d=0;20>d;d++)c.push(0);rows.push(c)}const planDefaults={rows,width:20,height:20,w:300,h:200,x:20,y:10};class Tiler extends React.Component{constructor(b){super(b);const c=window.localStorage.getItem('project');this.state=c?JSON.parse(c):Object.assign({type:0,person:!1,showTileDefinitions:!1,selected:-1,plans:[],tileSpec:`40 25 https://s27.postimg.org/kxmrvn54z/image.jpg
40 25 https://s30.postimg.org/jdmtfcg1d/image.jpg
40 25 https://s29.postimg.org/jrnfyfj7b/image.jpg
40 5 https://s27.postimg.org/hlan3nfk3/image.jpg`})}componentDidUpdate(){window.localStorage.setItem('project',JSON.stringify(this.state))}componentWillMount(){this.state.plans.length&&this.setState({selected:0})}handleClick(b,c){const d=this.state.plans[this.state.selected],f=d.rows.map(g=>g.slice(0));f[c][b]=this.state.type,this.setCurrentPlanState({rows:f})}select(b){this.setState({type:b})}handleColClick(b){const c=this.state.plans[this.state.selected],d=c.rows.map(f=>f.slice(0));for(let f=0;f<c.height;f++)d[f][b]=this.state.type;this.setCurrentPlanState({rows:d})}handleRowClick(b){const c=this.state.plans[this.state.selected],d=c.rows.map(f=>f.slice(0));for(let f=0;f<c.width;f++)d[b][f]=this.state.type;this.setCurrentPlanState({rows:d})}g1(){const b=this.state.plans[this.state.selected],c=[];for(let d=0;d<b.width;d++)c.push(React.createElement('td',{onClick:this.handleColClick.bind(this,d),className:'col'}));return c}g2(){const b=this.state.plans[this.state.selected],c=[];for(let d=0;d<b.height;d++)c.push(React.createElement('tr',null,React.createElement('td',{onClick:this.handleRowClick.bind(this,d),className:'row'},React.createElement('div',null)),this.g3(d)));return c}g3(b){const c=this.state.plans[this.state.selected],d=[];for(let f=0;f<c.width;f++)d.push(React.createElement('td',{onClick:this.handleClick.bind(this,f,b)},React.createElement('div',{className:'type-'+c.rows[b][f]})));return d}newPlan(){const b=window.prompt('Plan name');if(b){const c=[...this.state.plans,Object.assign({name:b},planDefaults)],d=c.length-1;this.setState(Object.assign({plans:c,selected:d}))}}deletePlan(){if(window.confirm(`Are you sure to delete plan "${this.state.plans[this.state.selected].name}"?`)){const b=this.state.selected,c=this.state.plans.slice(0);c.splice(b,1),this.setState({plans:c,selected:c.length-1})}}setPlan(b){this.setState({selected:parseInt(b.target.value)})}change(b,c){const d=parseInt(c.target.value);this.setCurrentPlanState({[b]:isNaN(d)?0:d})}setCurrentPlanState(b){const c=Object.assign({},this.state.plans[this.state.selected],b),d=[...this.state.plans];d[this.state.selected]=c,this.setState({plans:d})}togglePerson(){this.setState({person:!this.state.person})}handleTileSpecChange(b){this.setState({tileSpec:b.target.value})}handleLoadClick(){const{file:b}=this.refs;b.style.display='',b.focus(),b.click(),b.style.display='none'}load(){const b=this.refs.file.files[0];b||window.alert('Please select a project file first.');const c=new FileReader;c.onload=d=>{this.setState(JSON.parse(d.target.result)),this.refs.file.value=null},c.readAsText(b)}toggleTileDefinitions(){this.setState({showTileDefinitions:!this.state.showTileDefinitions})}render(){return React.createElement('div',null,React.createElement('style',null,this.state.tileSpec.split('\n').map(function(b,c){const[d,f,g]=b.split(' ');return`
                .type-${c} {
                  background-image: url("${g}");
                  background-size: contain;
                  width: ${2*d}px;
                  height: ${2*f}px;
                }
              `})),React.createElement('div',{className:'header'},React.createElement('h1',null,'Simple Tile Planner'),' | ',React.createElement('a',{href:'help.html'},'Help'),' | ',React.createElement('a',{href:'https://github.com/zdila/simpletileplanner'},'View on GitHub'),' | ',React.createElement('form',{action:'https://www.paypal.com/cgi-bin/webscr',method:'post',target:'_top',className:'donate'},React.createElement('input',{type:'hidden',name:'cmd',value:'_s-xclick'}),React.createElement('input',{type:'hidden',name:'hosted_button_id',value:'5E5GNZUBJA2YL'}),React.createElement('input',{type:'image',src:'https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif',border:'0',name:'submit',alt:'PayPal - The safer, easier way to pay online!'}))),React.createElement('hr',null),'Project:',React.createElement('input',{type:'file',ref:'file',onChange:this.load.bind(this)}),React.createElement('button',{onClick:this.handleLoadClick.bind(this)},'Load'),React.createElement('a',{className:'button',download:'project.txt',href:`data:text/plain,${JSON.stringify(this.state)}`},'Save'),React.createElement('button',{onClick:this.toggleTileDefinitions.bind(this)},this.state.showTileDefinitions?'Hide':'Edit',' tile definitions'),React.createElement('div',{className:'vr'}),' Plan: ',React.createElement('select',{onChange:this.setPlan.bind(this),disabled:-1===this.state.selected},this.state.plans.map((b,c)=>React.createElement('option',{value:c,selected:this.state.selected===c},b.name))),React.createElement('button',{onClick:this.newPlan.bind(this)},'Add new'),React.createElement('button',{onClick:this.deletePlan.bind(this),disabled:-1===this.state.selected},'Delete'),this.state.showTileDefinitions&&React.createElement('div',null,React.createElement('hr',null),React.createElement('label',{title:'[width in cm] [height in cm] [image URL]'},'Tiles: ',React.createElement('textarea',{cols:'100',rows:'4',onChange:this.handleTileSpecChange.bind(this)},this.state.tileSpec))),-1!==this.state.selected&&this.renderPlan())}renderPlan(){const b=this.state.plans[this.state.selected];let{x:c,y:d,w:f,h:g}=b;return c*=2,d*=2,f*=2,g*=2,React.createElement('div',null,React.createElement('hr',null),['x','y','w','h'].map((j,k)=>React.createElement('span',null,k?', ':'',j,' = ',React.createElement('input',{type:'number',value:b[j],onChange:this.change.bind(this,j),min:'0',max:'1000'}),' cm')),' ','| ',React.createElement('label',null,React.createElement('input',{type:'checkbox',checked:this.state.person,onClick:this.togglePerson.bind(this)}),' Show person (180 cm)'),React.createElement('hr',null),[0,1,2,3].map(j=>React.createElement('button',{className:'type '+(j===this.state.type?'selected':''),onClick:this.select.bind(this,j)},React.createElement('div',{className:'type-'+j}))),React.createElement('hr',null),React.createElement('div',{className:'work'},React.createElement('table',{className:'table'},React.createElement('tbody',null,React.createElement('tr',null,React.createElement('td',null),this.g1()),this.g2())),this.state.person&&React.createElement('svg',{className:'person',xmlns:'http://www.w3.org/2000/svg',height:'360',width:'117',version:'1.1',viewBox:'0 0 117 360',style:{left:`${c+22+(f-117)/2}px`,top:`${d+g-360+22}px`}},React.createElement('g',{transform:'translate(0 -692.36)'},React.createElement('g',{fill:'#eb9e25',transform:'matrix(.82612 0 0 .82718 -130.68 663.83)'},React.createElement('path',{'fill-rule':'evenodd',stroke:'#000','stroke-width':'1.2097pt',fill:'#eb9e25','stroke-linejoin':'round',d:'m226.54 75.312c2.8791 5.7583 1.2413 10.696 0.52145 16.454-7.4748 6.9985-31.078 3.5038-34.891 9.753-7.947 12.037-32.768 47.871-33.012 58.775 0.29166 9.586 20.009 44.252 31.402 56.013 2.7118 0.59919 7.0192 1.0313 8.7411-0.38623 0.89877-4.9346 1.1658-8.9012 2.2091-12.63-1.4451-0.84694-3.1717-0.18718-5.2627-0.0631-5.7904-7.0345-11.969-33.653-13.056-40.274 5.2665-9.5214 8.7857-21.777 17.701-35.798 2.4781 18.588 7.9063 47.883 5.5623 58.893-19.574 42.67 3.0376 130.68 3.6219 146.86-6.4499 30.651 9.2797 90.593 9.6784 96.152-0.42813 5.1455-3.4908 8.9397-1.5456 12.125-2.6022 11.04-4.4961 15.028-2.3368 21.506 2.1594 6.478 17.766 8.094 20.767 4.0964 0.93384-6.0646-0.60757-21.374-2.7669-24.253 1.1479-2.4657 2.5413-11.11 0.19728-18.521-2.7574-9.479 5.8245-63.068-0.7753-78.043 0.84154-3.3996 2.1728-14.491 2.1875-19.438-0.80452-2.9757 0.47953-35.1 2-60.188 1.5264 25.115 2.8068 57.422 2 60.406-2.8791 2.8791 0.5181 18.513 2.5999 21.499-2.0523 6.2934 3.2234 66.502 7.4939 73.501-2.344 7.4119 0.2896 14.816 1.4375 17.281-2.1593 2.8792-4.5276 19.842-3.5938 25.906 3.0009 3.9976 19.434 0.72803 21.594-5.75 2.1594-6.4781-0.98013-8.3972-3.5823-19.438 1.9453-3.1855-0.73422-10.698-1.1624-15.844 0.39871-5.5589 8.7182-58.481 2.2683-89.957-1.065-14.527 25.839-107.34 3.9025-147.96 0.90347-12.099-0.4364-42.534 2.1511-60.034-0.71979 6.478 2.5201 48.078 7.204 60.421-3.1708 15.237 1.748 57.894-1.1311 62.213-1.2297 5.1434-1.4113 13.638-1.9443 20.156 3.5989-2.1594 3.0429-4.5915 5.2317-3.1814 2.6022 5.1308-5.809 10.99-5.8384 15.537 5.7583 0 16.487-7.2189 12.338-31.381-0.0147-9.693 15.981-62.048 8.2958-75.018 2.6503-8.4233-3.7658-60.692-8.819-71.075-3.813-6.2493-28.002-3.814-35.477-10.812-0.71978-5.7583-3.5979-11.523-0.71875-17.281 6.4781-9.3572 6.7095-40.117-11.312-40.281-23.263 0.01308-20.358 30.705-13.88 40.062z'})))),React.createElement('svg',{className:'mask'},React.createElement('path',{fill:'white',d:`M 0 0 L 0 1500 L 2000 1500 L 2000 0 z M ${c} ${d} L ${f+c} ${d} L ${f+c} ${g+d} L ${c} ${g+d} z`}))))}}ReactDOM.render(React.createElement(Tiler,null),document.getElementById('example'));
